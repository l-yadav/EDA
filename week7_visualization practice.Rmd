---
title: "ANLY 506-52- B-2019/Summer - Exploratory Data Analytics"
subtitle: "Code Portfolio - Week-7 - Visualization practice"
author: "Latika Yadav"
date: "6/18/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Loading libraries
```{r message=FALSE, warning=FALSE}
library(tidyverse)
```

## Using mpg dataset
```{r}
mpg
#displ=car’s engine size, in litres
#hwy=car’s fuel efficiency on the highway, in miles per gallon (mpg).
```

## Creating plots

```{r}
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy))

#sample graphing template
#ggplot(data = <DATA>) + 
#<GEOM_FUNCTION>(mapping = aes(<MAPPINGS>))
```

## Asthetic mappings

```{r}
#coloring points by class
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = class))
```

```{r}
#by size
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, size = class))
```

```{r, warning=FALSE}
#Left display
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, alpha = class))
#Right display
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, shape = class))
```

```{r}
#coloring all points blue
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy), color = "blue")
```

## Facets
For categorical variables we can split plot into facets, subplots that each display one subset of the data.

```{r}
#by class in 2 rows
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
  facet_wrap(~ class, nrow = 2)
```
```{r}
#inside a grid
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
  facet_grid(drv ~ cyl)
```
```{r}
#looking at data using different categories, first here is all possible drv variables: 4,f,r and sceond is by cyl: 4,5,6,8
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) +
  facet_grid(drv ~ .)

ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) +
  facet_grid(. ~ cyl)
```

## Geometric objects
A geom is the geometrical object that a plot uses to represent data.
```{r, warning=FALSE}
# left display
ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy))

# right display
ggplot(data = mpg) + 
  geom_smooth(mapping = aes(x = displ, y = hwy))
```

Plotting differnt line types based on 4 drv types and coloring as well based on drv types
```{r, warning=FALSE}
ggplot(data = mpg) + 
  geom_smooth(mapping = aes(x = displ, y = hwy, linetype = drv, color = drv))
```

```{r}
#layering asthetics
ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) + 
  geom_point(mapping = aes(color = class)) + 
  geom_smooth()

#plotting without shaded se by explicit call se= FALSE
ggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) + 
  geom_point() + 
  geom_smooth(se= FALSE)
```
Exercises - Recreate the R code necessary to generate the given graphs: https://r4ds.had.co.nz/data-visualisation.html
```{r, warning=FALSE}

ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
geom_smooth( se=FALSE, mapping = aes(x = displ, y = hwy),show.legend = FALSE)

ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy)) + 
geom_smooth( se=FALSE, mapping = aes(x = displ, y = hwy, alpha = drv),show.legend = FALSE)

ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = drv)) + 
geom_smooth( se=FALSE, mapping = aes(x = displ, y = hwy, color = drv))

ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = drv)) + 
geom_smooth( se=FALSE, mapping = aes(x = displ, y = hwy, linetype = drv))

ggplot(data = mpg) + 
  geom_point(mapping = aes(x = displ, y = hwy, color = drv))+
  geom_point(mapping = aes(x = displ, y = hwy), shape=1, color = "white", size=5)          
```

## Statistical transformations

```{r}
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut)) # can also use stat_count() instead of geom_bar()
#geom_col() vs geom_bar()?
#geom_bar() makes the height of the bar proportional to the number of cases in each group (or if the weight aesthetic is supplied, the sum of the weights). If you want the heights of the bars to represent values in the data, use geom_col()
```

```{r}
#using stat_summary() to summarize
ggplot(data = diamonds) + 
  stat_summary(
    mapping = aes(x = cut, y = depth),
    fun.ymin = min,
    fun.ymax = max,
    fun.y = median)
```

## Position adjustments

```{r}
#aesthetics in bar using colour - only gives outlines
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, colour = cut))
#aesthetics in bar using fill - gives full color filled bars
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = cut))
#aesthetics in bar using filled to give stacked bar - use a diff variable on fill
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity))
#aesthetics in bar using filled to give 100% stacked bar - use a diff variable on fill and use position "fill"
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = "fill")
#aesthetics in bar using filled to give comparison bars - use a diff variable on fill and use position "dodge"
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = "dodge")
```

## Coordinate systems
```{r}
#create boxplots
ggplot(data = mpg, mapping = aes(x = class, y = hwy)) + 
  geom_boxplot()
#flipping axis
ggplot(data = mpg, mapping = aes(x = class, y = hwy)) + 
  geom_boxplot() +
  coord_flip()
```
